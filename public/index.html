<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- Compiled and minified CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript">
        function createTag(tag, section, name, num, text) {
            let tagName = name + num;
            tagName = document.createElement(tag);
            tagName.id = name + num;
            document.body.appendChild(tagName);
            document.getElementById(tagName.id).innerHTML = name + ": " + text;
            document.getElementById(section).appendChild(tagName);
        }

        axios.get('/data').then(function (response) {
            let education = response.data['education'];
            let pExp = response.data['practicalexperience'];
            //let pExpTask = pExp;
            console.log(pExp)
            document.getElementById('name').innerHTML = response.data['name'] + " " + response.data['lastname'];
            document.getElementById('profile').innerHTML = response.data['profile'];

            let eduArr = ['school', 'city', 'programme', 'startdate', 'enddate', 'degree'];
            //for (const eduObjNum in response.data['education']){
            for (const eduObjNum in education) {
                for (let i = 0; i < eduArr.length; i++) {
                    createTag('p', 'education', eduArr[i], eduObjNum, education[eduObjNum][eduArr[i]]);
                }
            }

            let expArr = ['type', 'name', 'role', 'expstartdate', 'expenddate', 'tasks'];
            for (const expObjNum in pExp) {
                for (let i = 0; i < expArr.length; i++) {

                    if (expArr[i] !== 'tasks') {
                        createTag('p', 'experience', expArr[i], expObjNum, pExp[expObjNum][expArr[i]]);

                    } else {
                        let pExpTask = pExp[expObjNum]['tasks'];
                        console.log(pExpTask)
                        for (let j = 0; j < pExpTask.length; j++) {
                            for (let p in pExpTask[j]) {
                                console.log(expArr[i] + " " + pExpTask[j][p]);
                                console.log(j)
                                createTag('li', 'exp-task', p, 'task' + expObjNum + j, pExpTask[j][p]);
                            }
                        }
                    }
                }
            }


        })
    </script>

    <style>
        .exempel {
            overflow-wrap: break-word;
        }

        .sidenav {
            box-shadow: none;
        }

        .section-wrapper {
            margin-left: 15px;
        }
    </style>

</head>
<body>

<div class="row">
    <div class="grid-example col s8 offset-s3" style="background-color: whitesmoke;">
        <span class="flow-text"><br></span>
    </div>
    <div class="grid-example col s2 offset-s1 m2 offset-m1 sidenav sidenav-fixed" style="background-color: #e3e3e3;">
        <span class="flow-text">bild n shit</span>
        <div class="profile-image">
            <img src="" id="profileimage" alt="Profile image">
        </div>
        <div class="profile-wrapper">
            <div class="contact">

            </div>
            <div class="skills">

            </div>
            <div class="languages">

            </div>
        </div>

    </div>
    <div class="grid-example col s8 offset-s3 m8 offset-m3 exempel" style="background-color: #e3e3e3;">
        <h3 id="name"></h3>
    </div>
    <div class="grid-example col s8 offset-s3 m8 offset-m3 exempel" style="background-color: whitesmoke;">
        <!--<span class="flow-text">cv skit h√§r</span>-->
        <div class="section-wrapper">
            <div class="divider"></div>
            <div class="section">
                <h5>Personal profile</h5>
                <p id="profile">
            </div>
            <div class="divider"></div>
            <div class="section">
                <h5>Education</h5>
                <p id="education">
            </div>
            <div class="divider"></div>
            <div class="section">
                <h5>Experiences</h5>
                <div id="experience">
                </div>
                <div id="task-div" class="section-wrapper">
                    <h6>Tasks</h6>
                    <li id="exp-task">

                    </li>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

</body>
</html>